{"version":3,"names":["enumKey","BlendMode","composeColorFilters","ctx","cf","processChildren","Skia","colorFilters","save","cf1","popAllAsOne","restore","push","ColorFilter","MakeCompose","makeBlendColorFilter","props","mode","color","Color","MakeBlend","makeSRGBToLinearGammaColorFilter","MakeSRGBToLinearGamma","makeLinearToSRGBGammaColorFilter","MakeLinearToSRGBGamma","declareLerpColorFilter","t","second","pop","first","Error","MakeLerp","makeMatrixColorFilter","matrix","MakeMatrix","makeLumaColorFilter","MakeLumaColorFilter"],"sources":["colorFilters.ts"],"sourcesContent":["import { enumKey } from \"../../dom/nodes\";\nimport type {\n  BlendColorFilterProps,\n  LerpColorFilterProps,\n  MatrixColorFilterProps,\n} from \"../../dom/types\";\nimport type { SkColorFilter } from \"../../skia/types\";\nimport { BlendMode } from \"../../skia/types\";\nimport type { DeclarationContext } from \"../DeclarationContext\";\n\nexport const composeColorFilters = (\n  ctx: DeclarationContext,\n  cf: SkColorFilter,\n  processChildren: () => void\n) => {\n  \"worklet\";\n  const { Skia } = ctx;\n  ctx.colorFilters.save();\n  processChildren();\n  const cf1 = ctx.colorFilters.popAllAsOne();\n  ctx.colorFilters.restore();\n  ctx.colorFilters.push(cf1 ? Skia.ColorFilter.MakeCompose(cf, cf1) : cf);\n};\n\nexport const makeBlendColorFilter = (\n  ctx: DeclarationContext,\n  props: BlendColorFilterProps\n) => {\n  \"worklet\";\n  const { mode } = props;\n  const color = ctx.Skia.Color(props.color);\n  const cf = ctx.Skia.ColorFilter.MakeBlend(color, BlendMode[enumKey(mode)]);\n  return cf;\n};\n\nexport const makeSRGBToLinearGammaColorFilter = (ctx: DeclarationContext) => {\n  \"worklet\";\n  const cf = ctx.Skia.ColorFilter.MakeSRGBToLinearGamma();\n  return cf;\n};\n\nexport const makeLinearToSRGBGammaColorFilter = (ctx: DeclarationContext) => {\n  \"worklet\";\n  const cf = ctx.Skia.ColorFilter.MakeLinearToSRGBGamma();\n  return cf;\n};\n\nexport const declareLerpColorFilter = (\n  ctx: DeclarationContext,\n  props: LerpColorFilterProps\n) => {\n  \"worklet\";\n  const { t } = props;\n  const second = ctx.colorFilters.pop();\n  const first = ctx.colorFilters.pop();\n  if (!first || !second) {\n    throw new Error(\n      \"LerpColorFilterNode: missing two color filters as children\"\n    );\n  }\n  const cf = ctx.Skia.ColorFilter.MakeLerp(t, first, second);\n  ctx.colorFilters.push(cf);\n};\n\nexport const makeMatrixColorFilter = (\n  ctx: DeclarationContext,\n  props: MatrixColorFilterProps\n) => {\n  \"worklet\";\n  const { matrix } = props;\n  const cf = ctx.Skia.ColorFilter.MakeMatrix(matrix);\n  return cf;\n};\n\nexport const makeLumaColorFilter = (ctx: DeclarationContext) => {\n  \"worklet\";\n  const cf = ctx.Skia.ColorFilter.MakeLumaColorFilter();\n  return cf;\n};\n"],"mappings":"AAAA,SAASA,OAAO,QAAQ,iBAAiB;AAOzC,SAASC,SAAS,QAAQ,kBAAkB;AAG5C,OAAO,MAAMC,mBAAmB,GAAGA,CACjCC,GAAuB,EACvBC,EAAiB,EACjBC,eAA2B,KACxB;EACH,SAAS;;EACT,MAAM;IAAEC;EAAK,CAAC,GAAGH,GAAG;EACpBA,GAAG,CAACI,YAAY,CAACC,IAAI,CAAC,CAAC;EACvBH,eAAe,CAAC,CAAC;EACjB,MAAMI,GAAG,GAAGN,GAAG,CAACI,YAAY,CAACG,WAAW,CAAC,CAAC;EAC1CP,GAAG,CAACI,YAAY,CAACI,OAAO,CAAC,CAAC;EAC1BR,GAAG,CAACI,YAAY,CAACK,IAAI,CAACH,GAAG,GAAGH,IAAI,CAACO,WAAW,CAACC,WAAW,CAACV,EAAE,EAAEK,GAAG,CAAC,GAAGL,EAAE,CAAC;AACzE,CAAC;AAED,OAAO,MAAMW,oBAAoB,GAAGA,CAClCZ,GAAuB,EACvBa,KAA4B,KACzB;EACH,SAAS;;EACT,MAAM;IAAEC;EAAK,CAAC,GAAGD,KAAK;EACtB,MAAME,KAAK,GAAGf,GAAG,CAACG,IAAI,CAACa,KAAK,CAACH,KAAK,CAACE,KAAK,CAAC;EACzC,MAAMd,EAAE,GAAGD,GAAG,CAACG,IAAI,CAACO,WAAW,CAACO,SAAS,CAACF,KAAK,EAAEjB,SAAS,CAACD,OAAO,CAACiB,IAAI,CAAC,CAAC,CAAC;EAC1E,OAAOb,EAAE;AACX,CAAC;AAED,OAAO,MAAMiB,gCAAgC,GAAIlB,GAAuB,IAAK;EAC3E,SAAS;;EACT,MAAMC,EAAE,GAAGD,GAAG,CAACG,IAAI,CAACO,WAAW,CAACS,qBAAqB,CAAC,CAAC;EACvD,OAAOlB,EAAE;AACX,CAAC;AAED,OAAO,MAAMmB,gCAAgC,GAAIpB,GAAuB,IAAK;EAC3E,SAAS;;EACT,MAAMC,EAAE,GAAGD,GAAG,CAACG,IAAI,CAACO,WAAW,CAACW,qBAAqB,CAAC,CAAC;EACvD,OAAOpB,EAAE;AACX,CAAC;AAED,OAAO,MAAMqB,sBAAsB,GAAGA,CACpCtB,GAAuB,EACvBa,KAA2B,KACxB;EACH,SAAS;;EACT,MAAM;IAAEU;EAAE,CAAC,GAAGV,KAAK;EACnB,MAAMW,MAAM,GAAGxB,GAAG,CAACI,YAAY,CAACqB,GAAG,CAAC,CAAC;EACrC,MAAMC,KAAK,GAAG1B,GAAG,CAACI,YAAY,CAACqB,GAAG,CAAC,CAAC;EACpC,IAAI,CAACC,KAAK,IAAI,CAACF,MAAM,EAAE;IACrB,MAAM,IAAIG,KAAK,CACb,4DACF,CAAC;EACH;EACA,MAAM1B,EAAE,GAAGD,GAAG,CAACG,IAAI,CAACO,WAAW,CAACkB,QAAQ,CAACL,CAAC,EAAEG,KAAK,EAAEF,MAAM,CAAC;EAC1DxB,GAAG,CAACI,YAAY,CAACK,IAAI,CAACR,EAAE,CAAC;AAC3B,CAAC;AAED,OAAO,MAAM4B,qBAAqB,GAAGA,CACnC7B,GAAuB,EACvBa,KAA6B,KAC1B;EACH,SAAS;;EACT,MAAM;IAAEiB;EAAO,CAAC,GAAGjB,KAAK;EACxB,MAAMZ,EAAE,GAAGD,GAAG,CAACG,IAAI,CAACO,WAAW,CAACqB,UAAU,CAACD,MAAM,CAAC;EAClD,OAAO7B,EAAE;AACX,CAAC;AAED,OAAO,MAAM+B,mBAAmB,GAAIhC,GAAuB,IAAK;EAC9D,SAAS;;EACT,MAAMC,EAAE,GAAGD,GAAG,CAACG,IAAI,CAACO,WAAW,CAACuB,mBAAmB,CAAC,CAAC;EACrD,OAAOhC,EAAE;AACX,CAAC","ignoreList":[]}