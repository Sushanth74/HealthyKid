{"version":3,"names":["enumKey","processPath","Path1DEffectStyle","composeDeclarations","composePathEffects","ctx","pe","processChildren","Skia","pathEffects","save","pe1","popAllAsOne","restore","push","PathEffect","MakeCompose","makeDiscretePathEffect","props","length","deviation","seed","MakeDiscrete","makePath2DPathEffect","matrix","path","MakePath2D","Error","makeDashPathEffect","intervals","phase","MakeDash","makeCornerPathEffect","r","MakeCorner","declareSumPathEffect","pes","popAll","MakeSum","bind","makeLine2DPathEffect","width","MakeLine2D","makePath1DPathEffect","advance","style","MakePath1D"],"sources":["pathEffects.ts"],"sourcesContent":["import { enumKey, processPath } from \"../../dom/nodes\";\nimport type {\n  CornerPathEffectProps,\n  DashPathEffectProps,\n  DiscretePathEffectProps,\n  Line2DPathEffectProps,\n  Path1DPathEffectProps,\n  Path2DPathEffectProps,\n} from \"../../dom/types\";\nimport type { SkPathEffect } from \"../../skia/types\";\nimport { Path1DEffectStyle } from \"../../skia/types\";\nimport {\n  composeDeclarations,\n  type DeclarationContext,\n} from \"../DeclarationContext\";\n\nexport const composePathEffects = (\n  ctx: DeclarationContext,\n  pe: SkPathEffect,\n  processChildren: () => void\n) => {\n  \"worklet\";\n  const { Skia } = ctx;\n  ctx.pathEffects.save();\n  processChildren();\n  const pe1 = ctx.pathEffects.popAllAsOne();\n  ctx.pathEffects.restore();\n  ctx.pathEffects.push(pe1 ? Skia.PathEffect.MakeCompose(pe, pe1) : pe);\n};\n\nexport const makeDiscretePathEffect = (\n  ctx: DeclarationContext,\n  props: DiscretePathEffectProps\n) => {\n  \"worklet\";\n  const { length, deviation, seed } = props;\n  return ctx.Skia.PathEffect.MakeDiscrete(length, deviation, seed);\n};\n\nexport const makePath2DPathEffect = (\n  ctx: DeclarationContext,\n  props: Path2DPathEffectProps\n) => {\n  \"worklet\";\n  const { matrix } = props;\n  const path = processPath(ctx.Skia, props.path);\n  const pe = ctx.Skia.PathEffect.MakePath2D(matrix, path);\n  if (pe === null) {\n    throw new Error(\"Path2DPathEffect: invalid path\");\n  }\n  return pe;\n};\n\nexport const makeDashPathEffect = (\n  ctx: DeclarationContext,\n  props: DashPathEffectProps\n) => {\n  \"worklet\";\n  const { intervals, phase } = props;\n  const pe = ctx.Skia.PathEffect.MakeDash(intervals, phase);\n  return pe;\n};\n\nexport const makeCornerPathEffect = (\n  ctx: DeclarationContext,\n  props: CornerPathEffectProps\n) => {\n  \"worklet\";\n  const { r } = props;\n  const pe = ctx.Skia.PathEffect.MakeCorner(r);\n  if (pe === null) {\n    throw new Error(\"CornerPathEffect: couldn't create path effect\");\n  }\n  return pe;\n};\n\nexport const declareSumPathEffect = (ctx: DeclarationContext) => {\n  \"worklet\";\n  // Note: decorateChildren functionality needs to be handled differently\n  const pes = ctx.pathEffects.popAll();\n  const pe = composeDeclarations(\n    pes,\n    ctx.Skia.PathEffect.MakeSum.bind(ctx.Skia.PathEffect)\n  );\n  ctx.pathEffects.push(pe);\n};\n\nexport const makeLine2DPathEffect = (\n  ctx: DeclarationContext,\n  props: Line2DPathEffectProps\n) => {\n  \"worklet\";\n  const { width, matrix } = props;\n  const pe = ctx.Skia.PathEffect.MakeLine2D(width, matrix);\n  if (pe === null) {\n    throw new Error(\"Line2DPathEffect: could not create path effect\");\n  }\n  return pe;\n};\n\nexport const makePath1DPathEffect = (\n  ctx: DeclarationContext,\n  props: Path1DPathEffectProps\n) => {\n  \"worklet\";\n  const { advance, phase, style } = props;\n  const path = processPath(ctx.Skia, props.path);\n  const pe = ctx.Skia.PathEffect.MakePath1D(\n    path,\n    advance,\n    phase,\n    Path1DEffectStyle[enumKey(style)]\n  );\n  if (pe === null) {\n    throw new Error(\"Path1DPathEffect: could not create path effect\");\n  }\n  return pe;\n};\n"],"mappings":"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","ignoreList":[]}