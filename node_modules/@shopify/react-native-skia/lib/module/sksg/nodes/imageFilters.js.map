{"version":3,"names":["enumKey","processRadius","BlendMode","BlurStyle","ColorChannel","processUniforms","TileMode","composeDeclarations","MorphologyOperator","Black","Float32Array","of","MakeInnerShadow","Skia","shadowOnly","dx","dy","sigmaX","sigmaY","color","input","sourceGraphic","ImageFilter","MakeColorFilter","ColorFilter","MakeBlend","Dst","sourceAlpha","SrcIn","f1","SrcOut","f2","MakeOffset","f3","MakeBlur","Decal","f4","MakeCompose","SrcOver","declareBlend","ctx","props","blend","mode","imageFilters","popAll","length","composer","bind","push","shaders","Shader","composeImageFilters","imgf1","processChildren","save","colorFilters","imgf2","popAllAsOne","cf","restore","_imgf","imgf","_ctx$imageFilters$pop","pop","makeOffsetImageFilter","x","y","declareDisplacementMapImageFilter","channelX","channelY","scale","shader","Error","map","MakeShader","MakeDisplacementMap","makeBlurImageFilter","blur","sigma","makeDropShadowImageFilter","cl","inner","Color","factory","MakeDropShadowOnly","MakeDropShadow","makeMorphologyImageFilter","operator","r","radius","Erode","MakeErode","MakeDilate","makeRuntimeShaderImageFilter","source","uniforms","rtb","RuntimeShaderBuilder","MakeRuntimeShader","declareBlendImageFilter","a","b","declareBlurMaskFilter","style","respectCTM","mf","MaskFilter","maskFilters"],"sources":["imageFilters.ts"],"sourcesContent":["import { enumKey, processRadius } from \"../../dom/nodes\";\nimport type {\n  BlendImageFilterProps,\n  BlendProps,\n  BlurImageFilterProps,\n  BlurMaskFilterProps,\n  DisplacementMapImageFilterProps,\n  DropShadowImageFilterProps,\n  MorphologyImageFilterProps,\n  OffsetImageFilterProps,\n  RuntimeShaderImageFilterProps,\n} from \"../../dom/types\";\nimport type { SkColor, Skia, SkImageFilter } from \"../../skia/types\";\nimport {\n  BlendMode,\n  BlurStyle,\n  ColorChannel,\n  processUniforms,\n  TileMode,\n} from \"../../skia/types\";\nimport type { DeclarationContext } from \"../DeclarationContext\";\nimport { composeDeclarations } from \"../DeclarationContext\";\n\nexport enum MorphologyOperator {\n  Erode,\n  Dilate,\n}\n\nconst Black = Float32Array.of(0, 0, 0, 1);\n\nconst MakeInnerShadow = (\n  Skia: Skia,\n  shadowOnly: boolean | undefined,\n  dx: number,\n  dy: number,\n  sigmaX: number,\n  sigmaY: number,\n  color: SkColor,\n  input: SkImageFilter | null\n) => {\n  \"worklet\";\n  const sourceGraphic = Skia.ImageFilter.MakeColorFilter(\n    Skia.ColorFilter.MakeBlend(Black, BlendMode.Dst),\n    null\n  );\n  const sourceAlpha = Skia.ImageFilter.MakeColorFilter(\n    Skia.ColorFilter.MakeBlend(Black, BlendMode.SrcIn),\n    null\n  );\n  const f1 = Skia.ImageFilter.MakeColorFilter(\n    Skia.ColorFilter.MakeBlend(color, BlendMode.SrcOut),\n    null\n  );\n  const f2 = Skia.ImageFilter.MakeOffset(dx, dy, f1);\n  const f3 = Skia.ImageFilter.MakeBlur(sigmaX, sigmaY, TileMode.Decal, f2);\n  const f4 = Skia.ImageFilter.MakeBlend(BlendMode.SrcIn, sourceAlpha, f3);\n  if (shadowOnly) {\n    return f4;\n  }\n  return Skia.ImageFilter.MakeCompose(\n    input,\n    Skia.ImageFilter.MakeBlend(BlendMode.SrcOver, sourceGraphic, f4)\n  );\n};\n\nexport const declareBlend = (ctx: DeclarationContext, props: BlendProps) => {\n  \"worklet\";\n  const { Skia } = ctx;\n  const blend = BlendMode[enumKey(props.mode as BlendProps[\"mode\"])];\n  // Blend ImageFilters\n  const imageFilters = ctx.imageFilters.popAll();\n  if (imageFilters.length > 0) {\n    const composer = Skia.ImageFilter.MakeBlend.bind(Skia.ImageFilter, blend);\n    ctx.imageFilters.push(composeDeclarations(imageFilters, composer));\n  }\n  // Blend Shaders\n  const shaders = ctx.shaders.popAll();\n  if (shaders.length > 0) {\n    const composer = Skia.Shader.MakeBlend.bind(Skia.Shader, blend);\n    ctx.shaders.push(composeDeclarations(shaders, composer));\n  }\n};\n\nexport const composeImageFilters = (\n  ctx: DeclarationContext,\n  imgf1: SkImageFilter,\n  processChildren: () => void\n) => {\n  \"worklet\";\n  const { Skia } = ctx;\n  ctx.imageFilters.save();\n  ctx.colorFilters.save();\n  processChildren();\n  let imgf2 = ctx.imageFilters.popAllAsOne();\n  const cf = ctx.colorFilters.popAllAsOne();\n  ctx.imageFilters.restore();\n  ctx.colorFilters.restore();\n  if (cf) {\n    imgf2 = Skia.ImageFilter.MakeCompose(\n      imgf2 ?? null,\n      Skia.ImageFilter.MakeColorFilter(cf, null)\n    );\n  }\n  const imgf = imgf2 ? Skia.ImageFilter.MakeCompose(imgf1, imgf2) : imgf1;\n  ctx.imageFilters.push(imgf);\n};\n\nconst input = (ctx: DeclarationContext) => {\n  \"worklet\";\n  return ctx.imageFilters.pop() ?? null;\n};\n\nexport const makeOffsetImageFilter = (\n  ctx: DeclarationContext,\n  props: OffsetImageFilterProps\n) => {\n  \"worklet\";\n  const { x, y } = props;\n  return ctx.Skia.ImageFilter.MakeOffset(x, y, null);\n};\n\nexport const declareDisplacementMapImageFilter = (\n  ctx: DeclarationContext,\n  props: DisplacementMapImageFilterProps\n) => {\n  \"worklet\";\n  const { channelX, channelY, scale } = props;\n  const shader = ctx.shaders.pop();\n  if (!shader) {\n    throw new Error(\"DisplacementMap expects a shader as child\");\n  }\n  const map = ctx.Skia.ImageFilter.MakeShader(shader, null);\n  const imgf = ctx.Skia.ImageFilter.MakeDisplacementMap(\n    ColorChannel[enumKey(channelX)],\n    ColorChannel[enumKey(channelY)],\n    scale,\n    map,\n    input(ctx)\n  );\n  ctx.imageFilters.push(imgf);\n};\n\nexport const makeBlurImageFilter = (\n  ctx: DeclarationContext,\n  props: BlurImageFilterProps\n) => {\n  \"worklet\";\n  const { mode, blur } = props;\n  const sigma = processRadius(ctx.Skia, blur);\n  const imgf = ctx.Skia.ImageFilter.MakeBlur(\n    sigma.x,\n    sigma.y,\n    TileMode[enumKey(mode)],\n    input(ctx)\n  );\n  return imgf;\n};\n\nexport const makeDropShadowImageFilter = (\n  ctx: DeclarationContext,\n  props: DropShadowImageFilterProps\n) => {\n  \"worklet\";\n  const { dx, dy, blur, shadowOnly, color: cl, inner } = props;\n  const color = ctx.Skia.Color(cl);\n  let factory;\n  if (inner) {\n    factory = MakeInnerShadow.bind(null, ctx.Skia, shadowOnly);\n  } else {\n    factory = shadowOnly\n      ? ctx.Skia.ImageFilter.MakeDropShadowOnly.bind(ctx.Skia.ImageFilter)\n      : ctx.Skia.ImageFilter.MakeDropShadow.bind(ctx.Skia.ImageFilter);\n  }\n  const imgf = factory(dx, dy, blur, blur, color, input(ctx));\n  return imgf;\n};\n\nexport const makeMorphologyImageFilter = (\n  ctx: DeclarationContext,\n  props: MorphologyImageFilterProps\n) => {\n  \"worklet\";\n  const { operator } = props;\n  const r = processRadius(ctx.Skia, props.radius);\n  let imgf;\n  if (MorphologyOperator[enumKey(operator)] === MorphologyOperator.Erode) {\n    imgf = ctx.Skia.ImageFilter.MakeErode(r.x, r.y, input(ctx));\n  } else {\n    imgf = ctx.Skia.ImageFilter.MakeDilate(r.x, r.y, input(ctx));\n  }\n  return imgf;\n};\n\nexport const makeRuntimeShaderImageFilter = (\n  ctx: DeclarationContext,\n  props: RuntimeShaderImageFilterProps\n) => {\n  \"worklet\";\n  const { source, uniforms } = props;\n  const rtb = ctx.Skia.RuntimeShaderBuilder(source);\n  if (uniforms) {\n    processUniforms(source, uniforms, rtb);\n  }\n  const imgf = ctx.Skia.ImageFilter.MakeRuntimeShader(rtb, null, input(ctx));\n  return imgf;\n};\n\nexport const declareBlendImageFilter = (\n  ctx: DeclarationContext,\n  props: BlendImageFilterProps\n) => {\n  \"worklet\";\n  const { mode } = props;\n  const a = ctx.imageFilters.pop();\n  const b = ctx.imageFilters.pop();\n  if (!a || !b) {\n    throw new Error(\"BlendImageFilter requires two image filters\");\n  }\n  const imgf = ctx.Skia.ImageFilter.MakeBlend(mode, a, b);\n  ctx.imageFilters.push(imgf);\n};\n\nexport const declareBlurMaskFilter = (\n  ctx: DeclarationContext,\n  props: BlurMaskFilterProps\n) => {\n  \"worklet\";\n  const { blur, style, respectCTM } = props;\n  const mf = ctx.Skia.MaskFilter.MakeBlur(\n    BlurStyle[enumKey(style)],\n    blur,\n    respectCTM\n  );\n  ctx.maskFilters.push(mf);\n};\n"],"mappings":"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","ignoreList":[]}