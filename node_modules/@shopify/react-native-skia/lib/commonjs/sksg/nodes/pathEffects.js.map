{"version":3,"names":["_nodes","require","_types","_DeclarationContext","composePathEffects","ctx","pe","processChildren","Skia","pathEffects","save","pe1","popAllAsOne","restore","push","PathEffect","MakeCompose","exports","makeDiscretePathEffect","props","length","deviation","seed","MakeDiscrete","makePath2DPathEffect","matrix","path","processPath","MakePath2D","Error","makeDashPathEffect","intervals","phase","MakeDash","makeCornerPathEffect","r","MakeCorner","declareSumPathEffect","pes","popAll","composeDeclarations","MakeSum","bind","makeLine2DPathEffect","width","MakeLine2D","makePath1DPathEffect","advance","style","MakePath1D","Path1DEffectStyle","enumKey"],"sources":["pathEffects.ts"],"sourcesContent":["import { enumKey, processPath } from \"../../dom/nodes\";\nimport type {\n  CornerPathEffectProps,\n  DashPathEffectProps,\n  DiscretePathEffectProps,\n  Line2DPathEffectProps,\n  Path1DPathEffectProps,\n  Path2DPathEffectProps,\n} from \"../../dom/types\";\nimport type { SkPathEffect } from \"../../skia/types\";\nimport { Path1DEffectStyle } from \"../../skia/types\";\nimport {\n  composeDeclarations,\n  type DeclarationContext,\n} from \"../DeclarationContext\";\n\nexport const composePathEffects = (\n  ctx: DeclarationContext,\n  pe: SkPathEffect,\n  processChildren: () => void\n) => {\n  \"worklet\";\n  const { Skia } = ctx;\n  ctx.pathEffects.save();\n  processChildren();\n  const pe1 = ctx.pathEffects.popAllAsOne();\n  ctx.pathEffects.restore();\n  ctx.pathEffects.push(pe1 ? Skia.PathEffect.MakeCompose(pe, pe1) : pe);\n};\n\nexport const makeDiscretePathEffect = (\n  ctx: DeclarationContext,\n  props: DiscretePathEffectProps\n) => {\n  \"worklet\";\n  const { length, deviation, seed } = props;\n  return ctx.Skia.PathEffect.MakeDiscrete(length, deviation, seed);\n};\n\nexport const makePath2DPathEffect = (\n  ctx: DeclarationContext,\n  props: Path2DPathEffectProps\n) => {\n  \"worklet\";\n  const { matrix } = props;\n  const path = processPath(ctx.Skia, props.path);\n  const pe = ctx.Skia.PathEffect.MakePath2D(matrix, path);\n  if (pe === null) {\n    throw new Error(\"Path2DPathEffect: invalid path\");\n  }\n  return pe;\n};\n\nexport const makeDashPathEffect = (\n  ctx: DeclarationContext,\n  props: DashPathEffectProps\n) => {\n  \"worklet\";\n  const { intervals, phase } = props;\n  const pe = ctx.Skia.PathEffect.MakeDash(intervals, phase);\n  return pe;\n};\n\nexport const makeCornerPathEffect = (\n  ctx: DeclarationContext,\n  props: CornerPathEffectProps\n) => {\n  \"worklet\";\n  const { r } = props;\n  const pe = ctx.Skia.PathEffect.MakeCorner(r);\n  if (pe === null) {\n    throw new Error(\"CornerPathEffect: couldn't create path effect\");\n  }\n  return pe;\n};\n\nexport const declareSumPathEffect = (ctx: DeclarationContext) => {\n  \"worklet\";\n  // Note: decorateChildren functionality needs to be handled differently\n  const pes = ctx.pathEffects.popAll();\n  const pe = composeDeclarations(\n    pes,\n    ctx.Skia.PathEffect.MakeSum.bind(ctx.Skia.PathEffect)\n  );\n  ctx.pathEffects.push(pe);\n};\n\nexport const makeLine2DPathEffect = (\n  ctx: DeclarationContext,\n  props: Line2DPathEffectProps\n) => {\n  \"worklet\";\n  const { width, matrix } = props;\n  const pe = ctx.Skia.PathEffect.MakeLine2D(width, matrix);\n  if (pe === null) {\n    throw new Error(\"Line2DPathEffect: could not create path effect\");\n  }\n  return pe;\n};\n\nexport const makePath1DPathEffect = (\n  ctx: DeclarationContext,\n  props: Path1DPathEffectProps\n) => {\n  \"worklet\";\n  const { advance, phase, style } = props;\n  const path = processPath(ctx.Skia, props.path);\n  const pe = ctx.Skia.PathEffect.MakePath1D(\n    path,\n    advance,\n    phase,\n    Path1DEffectStyle[enumKey(style)]\n  );\n  if (pe === null) {\n    throw new Error(\"Path1DPathEffect: could not create path effect\");\n  }\n  return pe;\n};\n"],"mappings":"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","ignoreList":[]}