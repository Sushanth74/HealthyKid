{"version":3,"names":["_nodes","require","_types","composeColorFilters","ctx","cf","processChildren","Skia","colorFilters","save","cf1","popAllAsOne","restore","push","ColorFilter","MakeCompose","exports","makeBlendColorFilter","props","mode","color","Color","MakeBlend","BlendMode","enumKey","makeSRGBToLinearGammaColorFilter","MakeSRGBToLinearGamma","makeLinearToSRGBGammaColorFilter","MakeLinearToSRGBGamma","declareLerpColorFilter","t","second","pop","first","Error","MakeLerp","makeMatrixColorFilter","matrix","MakeMatrix","makeLumaColorFilter","MakeLumaColorFilter"],"sources":["colorFilters.ts"],"sourcesContent":["import { enumKey } from \"../../dom/nodes\";\nimport type {\n  BlendColorFilterProps,\n  LerpColorFilterProps,\n  MatrixColorFilterProps,\n} from \"../../dom/types\";\nimport type { SkColorFilter } from \"../../skia/types\";\nimport { BlendMode } from \"../../skia/types\";\nimport type { DeclarationContext } from \"../DeclarationContext\";\n\nexport const composeColorFilters = (\n  ctx: DeclarationContext,\n  cf: SkColorFilter,\n  processChildren: () => void\n) => {\n  \"worklet\";\n  const { Skia } = ctx;\n  ctx.colorFilters.save();\n  processChildren();\n  const cf1 = ctx.colorFilters.popAllAsOne();\n  ctx.colorFilters.restore();\n  ctx.colorFilters.push(cf1 ? Skia.ColorFilter.MakeCompose(cf, cf1) : cf);\n};\n\nexport const makeBlendColorFilter = (\n  ctx: DeclarationContext,\n  props: BlendColorFilterProps\n) => {\n  \"worklet\";\n  const { mode } = props;\n  const color = ctx.Skia.Color(props.color);\n  const cf = ctx.Skia.ColorFilter.MakeBlend(color, BlendMode[enumKey(mode)]);\n  return cf;\n};\n\nexport const makeSRGBToLinearGammaColorFilter = (ctx: DeclarationContext) => {\n  \"worklet\";\n  const cf = ctx.Skia.ColorFilter.MakeSRGBToLinearGamma();\n  return cf;\n};\n\nexport const makeLinearToSRGBGammaColorFilter = (ctx: DeclarationContext) => {\n  \"worklet\";\n  const cf = ctx.Skia.ColorFilter.MakeLinearToSRGBGamma();\n  return cf;\n};\n\nexport const declareLerpColorFilter = (\n  ctx: DeclarationContext,\n  props: LerpColorFilterProps\n) => {\n  \"worklet\";\n  const { t } = props;\n  const second = ctx.colorFilters.pop();\n  const first = ctx.colorFilters.pop();\n  if (!first || !second) {\n    throw new Error(\n      \"LerpColorFilterNode: missing two color filters as children\"\n    );\n  }\n  const cf = ctx.Skia.ColorFilter.MakeLerp(t, first, second);\n  ctx.colorFilters.push(cf);\n};\n\nexport const makeMatrixColorFilter = (\n  ctx: DeclarationContext,\n  props: MatrixColorFilterProps\n) => {\n  \"worklet\";\n  const { matrix } = props;\n  const cf = ctx.Skia.ColorFilter.MakeMatrix(matrix);\n  return cf;\n};\n\nexport const makeLumaColorFilter = (ctx: DeclarationContext) => {\n  \"worklet\";\n  const cf = ctx.Skia.ColorFilter.MakeLumaColorFilter();\n  return cf;\n};\n"],"mappings":"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","ignoreList":[]}